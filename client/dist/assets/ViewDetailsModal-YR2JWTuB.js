import{j as a,M as m,B as s,I as j,d as p,P as D,T as i,a as v,E as y,_ as T}from"./index-Ddak_8or.js";const R=({open:g,onClose:x,request:o})=>{const h=async()=>{const l=new y("portrait"),e=await T(()=>import("./NU_shield-EA1qp1QC.js"),[]);l.addImage(e.default,"PNG",28,7,18,20),l.setFontSize(20),l.setFont("Helvetica","bold"),l.setTextColor("#35408e"),l.text("National University Job Order Report",50,20),l.setFontSize(12),l.setTextColor("#333"),l.text(`Generated on: ${new Date().toLocaleString()}`,10,50),l.setDrawColor(150),l.line(10,55,200,55);const t=[{label:"Job Order Number",value:o.jobOrderNumber},{label:"Requestor",value:`${o.firstName} ${o.lastName}`},{label:"Scenario",value:o.scenario},{label:"Object",value:o.object},{label:"Building",value:o.building},{label:"Campus",value:o.campus},{label:"Floor",value:o.floor},{label:"Requesting Office",value:o.reqOffice},{label:"Date Requested",value:new Date(o.dateTo).toLocaleDateString()},{label:"Date From",value:new Date(o.dateFrom).toLocaleDateString()},{label:"Date To",value:new Date(o.createdAt).toLocaleDateString()},{label:"Description",value:o.jobDesc},{label:"Assigned To",value:o.assignedTo},{label:"Cost Required",value:o.costRequired},{label:"Charge To",value:o.chargeTo}].filter(d=>d.value),n=65;if(o!=null&&o.fileUrl){const d=await b(o.fileUrl);l.addImage(d,"JPEG",10,n,90,90)}const c=o!=null&&o.fileUrl?n+90+10:n;l.autoTable({startY:c,head:[["Field","Details"]],body:t.map(d=>[d.label,d.value]),headStyles:{fillColor:"#35408e",textColor:"#fff",fontSize:12},bodyStyles:{textColor:"#333",fontSize:10,overflow:"linebreak"},alternateRowStyles:{fillColor:"#f3f3f3"},styles:{cellWidth:"auto",minCellHeight:10,halign:"left"},columnStyles:{1:{cellWidth:"auto"}},margin:{top:10}});const r=l.internal.pageSize.height;l.setFontSize(10),l.setTextColor("#888"),l.text("This report is machine-generated for National University Manila.",10,r-10);const f=`${new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})} - ${o.jobOrderNumber}.pdf`;l.save(f)},b=l=>new Promise((e,t)=>{fetch(l).then(n=>n.blob()).then(n=>{const c=new FileReader;c.onloadend=()=>e(c.result),c.onerror=r=>t(r),c.readAsDataURL(n)}).catch(t)});return a.jsx(m,{open:g,onClose:x,"aria-labelledby":"request-details-modal-title","aria-describedby":"request-details-modal-description",BackdropProps:{timeout:0,sx:{backdropFilter:"blur(5px)"}},children:a.jsxs(s,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"90%",maxWidth:900,p:4,display:"flex",flexDirection:{xs:"column",sm:"row"},gap:3,bgcolor:"background.paper",borderRadius:2,boxShadow:24},children:[a.jsx(j,{"aria-label":"close",onClick:x,sx:{position:"absolute",top:16,right:16,color:l=>l.palette.grey[500]},children:a.jsx(p,{})}),(o==null?void 0:o.fileUrl)&&a.jsx(D,{elevation:3,sx:{flex:"1 1 40%",display:"flex",justifyContent:"center",alignItems:"center",overflow:"hidden"},children:a.jsx("img",{src:o.fileUrl,alt:"Submitted File",style:{maxWidth:"100%",borderRadius:8,objectFit:"contain"}})}),a.jsxs(s,{sx:{flex:"1 1 60%",display:"flex",flexDirection:"column",gap:2},children:[o&&a.jsxs(i,{variant:"h5",component:"h2",children:["Application Details - Order # ",o.jobOrderNumber||"N/A"]}),(o==null?void 0:o.urgency)&&a.jsxs(i,{children:[a.jsx("strong",{children:"Urgency:"})," ",o.urgency]}),(o==null?void 0:o.firstName)&&(o==null?void 0:o.lastName)&&a.jsxs(i,{children:[a.jsx("strong",{children:"Requestor:"})," ",o.firstName," ",o.lastName]}),(o==null?void 0:o.scenario)&&a.jsxs(i,{children:[a.jsx("strong",{children:"Scenario:"})," ",o.scenario]}),(o==null?void 0:o.object)&&a.jsxs(i,{children:[a.jsx("strong",{children:"Object:"})," ",o.object]}),(o==null?void 0:o.building)&&a.jsxs(i,{children:[a.jsx("strong",{children:"Building:"})," ",o.building]}),(o==null?void 0:o.campus)&&a.jsxs(i,{children:[a.jsx("strong",{children:"Campus:"})," ",o.campus]}),(o==null?void 0:o.floor)&&a.jsxs(i,{children:[a.jsx("strong",{children:"Floor:"})," ",o.floor]}),(o==null?void 0:o.reqOffice)&&a.jsxs(i,{children:[a.jsx("strong",{children:"Requesting Office:"})," ",o.reqOffice]}),(o==null?void 0:o.dateFrom)&&a.jsxs(i,{children:[a.jsx("strong",{children:"Date From:"})," ",new Date(o.dateFrom).toLocaleDateString()]}),(o==null?void 0:o.dateTo)&&a.jsxs(i,{children:[a.jsx("strong",{children:"Date To:"})," ",new Date(o.dateTo).toLocaleDateString()]}),(o==null?void 0:o.jobDesc)&&a.jsxs(i,{sx:{wordBreak:"break-word"},children:[a.jsx("strong",{children:"Description:"})," ",o.jobDesc]}),(o==null?void 0:o.assignedTo)&&a.jsxs(i,{children:[a.jsx("strong",{children:"Assigned To:"})," ",o.assignedTo]}),(o==null?void 0:o.costRequired)&&a.jsxs(i,{children:[a.jsx("strong",{children:"Cost Required:"})," ",o.costRequired]}),(o==null?void 0:o.chargeTo)&&a.jsxs(i,{children:[a.jsx("strong",{children:"Charge To:"})," ",o.chargeTo]}),a.jsx(v,{variant:"contained",color:"primary",onClick:h,children:"Export to PDF"})]})]})})};export{R as default};
